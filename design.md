# 圣化模拟器需求文档

## 1. 项目概述

### 1.1 项目名称
圣化模拟器

### 1.2 项目背景
开发一个网页版圣化模拟器，用于模拟游戏中武器圣化系统的随机过程和资源消耗。

### 1.3 项目目标
- 模拟五阶段圣化系统的随机路径选择
- 计算圣化过程中的资源消耗
- 提供批量模拟功能进行概率统计
- 支持特定路径目标的模拟

## 2. 核心机制设计

### 2.1 圣化系统基础
- **阶段数量**: 5个阶段（一阶、二阶、三阶、四阶、五阶）
- **成功率**: 100%（圣化不会失败）
- **随机性**: 每阶段随机选择5种路径之一

### 2.2 路径系统
- **职业系统**: 支持多个职业（如野蛮人、圣骑士、法师、德鲁伊、死灵法师），每个职业在每个圣化阶段都有不同的路径命名。
- **路径数量**: 每个职业在每阶段都有5种路径（A、B、C、D、E）。
- **概率分布**: 完全相等，各20%。
- **路径命名**: 每个职业、每个阶段都使用独立的命名体系。

### 2.3 资源消耗系统
- **材料类型**: 圣化石 + 金币
- **消耗递增**: 随阶段递增
  - 一阶：1个圣化石 + 1000金币
  - 二阶：2个圣化石 + 3000金币
  - 三阶：5个圣化石 + 8000金币
  - 四阶：10个圣化石 + 15000金币
  - 五阶：20个圣化石 + 30000金币

## 3. 功能需求

### 3.1 模拟设置功能
- **职业选择**: 支持在多个职业间进行选择，选择后会加载该职业对应的路径数据。
- **起始阶段选择**: 支持从0阶（未圣化）到4阶开始模拟。当起始阶段被选择后，用户只能为该阶段之后（即 `起始阶段 + 1` 及更高阶段）的圣化过程设置目标路径。
- **目标路径设置**: 可为每个有效的圣化阶段选择一个或多个目标路径。如果一个阶段未选择任何特定路径，则视为“任意”路径均可接受。
- **屏蔽不想要路径**: 每个阶段最多可屏蔽两个不想要的路径选项。屏蔽一个路径将使该阶段的圣化石消耗翻倍（x2），金币消耗变为1.2倍；屏蔽两个路径将使圣化石消耗变为3倍（x3），金币消耗变为1.2 * 1.2 = 1.44倍。被屏蔽的路径将不会在随机选择中出现。
  - **交互规则**: 当一个路径被屏蔽后，其对应的目标路径选择框将变为禁用状态。若要取消屏蔽，需点击“已屏蔽”按钮。尝试屏蔽第三个路径时，系统将提示“每个阶段最多只能屏蔽两个路径”。
- **批量模拟次数**: 支持设置批量模拟的次数（1-10000次）。

### 3.2 模拟执行功能
- **单次模拟**: 执行一次完整的圣化过程
- **批量模拟**: 执行多次模拟并统计结果
- **实时显示**: 显示每次圣化的过程和结果

### 3.3 结果展示功能
- **圣化路径**: 显示每阶段的路径选择结果
- **资源消耗**: 显示总圣化石和金币消耗
- **统计信息**: 批量模拟时显示成功率、平均消耗等。
- **单次模拟失败次数**: 单次模拟结果中，显示为达成目标而进行的失败尝试次数。

## 4. 用户界面需求

### 4.1 整体布局
- **响应式设计**: 主要适配手机端
- **现代化UI**: 使用现代化的界面设计
- **直观操作**: 操作简单直观

### 4.2 主要界面组件
- **标题区域**: 显示"圣化模拟器"标题
- **设置区域**: 包含起始阶段、目标路径、批量次数设置
- **操作按钮**: 单次模拟和批量模拟按钮
- **结果显示**: 模拟过程和统计结果展示区域

## 5. 技术实现需求

### 5.1 技术栈
- **前端框架**: Vue.js 3
- **样式框架**: Tailwind CSS
- **部署方式**: 静态网页

### 5.2 核心算法
- **随机数生成**: 用于路径随机选择
- **资源计算**: 根据阶段计算消耗
- **统计计算**: 批量模拟的统计分析

### 5.3 数据结构
```javascript
// 模拟结果数据结构
{
  success: boolean,           // 是否达成目标
  path: [                    // 圣化路径
    {
      stage: number,         // 阶段
      path: string,          // 路径名称
      costStone: number,     // 圣化石消耗
      costGold: number       // 金币消耗
    }
  ],
  totalStone: number,        // 总圣化石消耗
  totalGold: number          // 总金币消耗
}
```

## 6. 非功能需求

### 6.1 性能需求
- **响应时间**: 单次模拟响应时间 < 1秒
- **批量模拟**: 支持10000次批量模拟
- **内存使用**: 合理的内存使用，避免内存泄漏

### 6.2 兼容性需求
- **浏览器兼容**: 支持主流移动端浏览器
- **设备兼容**: 适配不同尺寸的手机屏幕

### 6.3 用户体验需求
- **操作流畅**: 界面操作流畅，无卡顿
- **信息清晰**: 结果展示清晰易懂
- **错误处理**: 合理的错误提示和处理

## 7. 开发计划

### 7.1 第一阶段：基础功能
- 实现基本的圣化模拟逻辑
- 完成单次模拟功能
- 基础界面搭建

### 7.2 第二阶段：高级功能
- 实现批量模拟功能
- 添加统计结果展示
- 完善目标路径设置

### 7.3 第三阶段：优化完善
- 界面美化和用户体验优化
- 性能优化
- 测试和bug修复

## 8. 验收标准

### 8.1 功能验收
- 单次模拟功能正常
- 批量模拟功能正常
- 目标路径设置功能正常
- 统计结果计算准确

### 8.2 界面验收
- 界面美观，符合设计要求
- 响应式布局正常
- 操作流畅，无卡顿

### 8.3 性能验收
- 单次模拟响应时间 < 1秒
- 批量模拟功能稳定
- 内存使用合理 

